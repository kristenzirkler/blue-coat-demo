jQuery(document).ready(function($){function i(i){var t=i.width()/2,o=0,e=0,s=n(e,o,t,$(window).height(),$(window).width());return i.css("position","fixed").velocity({top:0,left:0,translateX:0},0),s}function n(i,n,t,o,e){var s=n>o/2?n:o-n,d=i>e/2?i:e-i;return Math.ceil(Math.sqrt(Math.pow(s,2)+Math.pow(d,2))/t)}function t(i,n,t){i.velocity({scale:n},400,function(){$("body").toggleClass("overflow-hidden",t),t?i.parents(".cd-section").addClass("modal-is-visible").end().off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"):i.removeClass("is-visible").removeAttr("style").siblings('[data-type="modal-trigger"]').removeClass("to-circle")})}function o(){var i=$(".cd-section.modal-is-visible").find(".cd-modal-bg"),t=i.width()/2,o=i.siblings(".btn").offset().top+t-$(window).scrollTop(),e=i.siblings(".btn").offset().left+t,s=n(o,e,t,$(window).height(),$(window).width());i.velocity({top:o-t,left:e-t,scale:s},0)}function e(){var i=$(".cd-section.modal-is-visible");$(".cd-active").removeClass("cd-active"),i.removeClass("modal-is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t(i.find(".cd-modal-bg"),1,!1)}),i.parents(".no-csstransitions").length>0&&t(i.find(".cd-modal-bg"),1,!1)}$('[data-type="modal-trigger"]').on("click",function(){var i=$(this),n=i.width(),o=i.height(),e=i.offset().top,s=i.offset().left,d=30;i.addClass("cd-active"),$("#modalCtr").width(n).height(o).offset({top:e,left:s}),$("#modalCtr").addClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t($("#modalCtr"),d,!0)}),i.parents(".no-csstransitions").length>0&&t(i.next(".cd-modal-bg"),d,!0)}),$(".cd-section .cd-modal-close").on("click",function(){e()}),$(document).keyup(function(i){"27"===i.which&&e()}),$(window).on("resize",function(){$(".cd-section.modal-is-visible").length>0&&window.requestAnimationFrame(o)})});